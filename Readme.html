<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
</head>
<body>
<h1 id="drupal8themingwithtwigandsass">Drupal 8 theming with Twig and Sass</h1>

<p><strong>Presentation held at</strong></p>

<p><a href="http://milan2016.drupaldays.org">Drupal Developer Days Milan</a>, Italy, June 21&#8211;26 2016</p>

<p><strong>Abstract</strong></p>

<p>In this session we will make a quick start into templating. We will see how to setup Grunt.js to automate CSS, JS and asset creation. This will bring us to an easy maintainable drupal theme. The main topics:</p>

<ul>
<li>add a set of favicons</li>
<li>configuring Grunt tasks</li>
<li>setup a Sass and JS workflow</li>
<li>use SVG as background images</li>
<li>some extras from lessons learned</li>
</ul>

<p>This talk contains the experience of several Drupal 8 projects already in production.</p>

<h2 id="aboutthespeaker">About the Speaker</h2>

<p><strong>Tassilo Groeper</strong></p>

<ul>
<li>Full stack developer at <a href="www.wearewondrous.com">WONDROUS LLC</a> Basel/Switzerland</li>
<li>first Drupal 8 pages published with beta&#8211;4</li>
<li>Clean Coder, originally from Germany</li>
</ul>

<h2 id="whattoexpect">What to expect</h2>

<ul>
<li>Quick jump into a theme setup</li>
<li>add a set of favicons</li>
<li>setup Sass workflow</li>
<li>BrowserSync as auto reload and browser sync feature</li>
<li>SVG backgrounds with grunticon</li>
<li>JS aggregation (e.g. owl-carousel)</li>
<li>Extras:

<ul>
<li>enhance content manager experience</li>
<li>Detail/overview page navigation</li>
<li>SEO Bug in Drupal 8</li>
</ul></li>
</ul>

<h2 id="therepo">The Repo</h2>

<ul>
<li>find at: Github</li>
</ul><div class="TOC">


<ul>
<li><a href="#drupal8themingwithtwigandsass">Drupal 8 theming with Twig and Sass</a>

<ul>
<li><a href="#aboutthespeaker">About the Speaker</a></li>
<li><a href="#whattoexpect">What to expect</a></li>
<li><a href="#therepo">The Repo</a></li>
<li><a href="#favicon">Favicon</a></li>
<li><a href="#nodejsgruntandsasssetup">Node JS, Grunt and SASS setup</a>

<ul>
<li><a href="#stepone:sasscompile">Step One: Sass compile</a></li>
<li><a href="#steptwo:addsvgbackground">Step Two: Add SVG Background</a></li>
<li><a href="#stepthree:stylethearticleteaser">Step Three: Style the Article Teaser</a></li>
<li><a href="#stepfour:makethearticleviewaslider">Step Four: Make the Article view a Slider</a></li>
</ul></li>
<li><a href="#extraone:articledetailpagestyling">Extra One: Article detail Page Styling</a></li>
<li><a href="#extratwo:articlebackbutton">Extra Two: Article Back button</a>

<ul>
<li><a href="#twigroutes">TWIG Routes</a></li>
</ul></li>
<li><a href="#extrathree:seomalusbyheaderlinks">Extra Three: SEO malus by header links</a></li>
</ul></li>
</ul>
</div>

<h2 id="favicon">Favicon</h2>

<ul>
<li><a href="http://realfavicongenerator.net">realfavicongenerator.net</a></li>
<li>put the downloads into <code>favicons</code>-folder</li>
</ul>

<figure>
<img src="talk/favicon-twig-include.png" alt="includes/_favicon.html.twig" />
<figcaption><code>includes/_favicon.html.twig</code></figcaption>
</figure>

<figure>
<img src="talk/favicon-twig-include-head.png" alt="layout/_html.html.twig" />
<figcaption><code>layout/_html.html.twig</code></figcaption>
</figure>

<figure>
<img src="talk/favicon-include.png" alt="Favicon Includes in browser head" />
<figcaption>Favicon Includes in browser head</figcaption>
</figure>

<h2 id="nodejsgruntandsasssetup">Node JS, Grunt and SASS setup</h2>

<ul>
<li><code>Grundfile.js</code> and <code>package.json</code></li>
<li><code>$ npm install</code></li>
<li><code>grunt</code> default task</li>
<li>two step SASS to CSS compression and post processing</li>
<li>BrowserSync as auto reload and browser sync feature</li>
<li>SVG backgrounds <a href="https://github.com/filamentgroup/grunticon">grunticon</a></li>
<li>JS aggregation (e.g. owl-carousel)</li>
<li>put <code>.htaccess</code> in privat folders like <code>sass</code>, <code>js-src</code> and <code>grunt-templates</code></li>
</ul>

<h3 id="stepone:sasscompile">Step One: Sass compile</h3>

<ul>
<li>create Sass task, PostCSS Task and watch files</li>
<li>use BrowserSync while watching</li>
<li>create nested file <code>styles.css</code> and post processed file <code>styles.min.css</code></li>
<li>differentiate between the CSS processing steps, may be error prone, e.g.:

<ul>
<li>z-index, calculation</li>
<li>animation keywords</li>
</ul></li>
</ul>

<p><img src="talk/grunt-sass-postcss-1.png" alt="Sass and PostCss config" /></p>

<figure>
<img src="talk/grunt-sass-postcss-2.png" alt="Watch task" />
<figcaption>Watch task</figcaption>
</figure>

<h3 id="steptwo:addsvgbackground">Step Two: Add SVG Background</h3>

<ul>
<li>create folder <code>svg-src/backgrounds</code></li>
<li>add tasks <code>svgmin</code>, <code>clean</code>, <code>grunticon</code></li>
<li>see <code>grunt-templates/grunticon/backgrounds.hbs</code> for Sass template</li>
</ul>

<figure>
<img src="talk/svg-backgrounds-grunt-tasks.png" alt="Grundfile.js" />
<figcaption><code>Grundfile.js</code></figcaption>
</figure>

<figure>
<img src="talk/svg-backgrounds-hbs.png" alt="grunt-templates/grunticon/backgrounds.hbs" />
<figcaption><code>grunt-templates/grunticon/backgrounds.hbs</code></figcaption>
</figure>

<figure>
<img src="talk/svg-backgrounds-hbs-results.png" alt="sass/custom/_backgrounds.scss" />
<figcaption><code>sass/custom/_backgrounds.scss</code></figcaption>
</figure>

<figure>
<img src="talk/svg-backgrounds-sass-include.png" alt="sass/custom/_layout.scss" />
<figcaption><code>sass/custom/_layout.scss</code></figcaption>
</figure>

<h3 id="stepthree:stylethearticleteaser">Step Three: Style the Article Teaser</h3>

<ul>
<li>create <code>templates/content/node--article--teaser.html.twig</code></li>
<li>shape it to be one single anchor and style it</li>
</ul>

<figure>
<img src="talk/article-teaser-twig.png" alt="templates/content/node--article--teaser.html.twig" />
<figcaption><code>templates/content/node--article--teaser.html.twig</code></figcaption>
</figure>

<figure>
<img src="talk/article-teaser-sass.png" alt="sass/custom/_nodes.scss" />
<figcaption><code>sass/custom/_nodes.scss</code></figcaption>
</figure>

<h3 id="stepfour:makethearticleviewaslider">Step Four: Make the Article view a Slider</h3>

<ul>
<li><a href="https://github.com/OwlCarousel2/OwlCarousel2">Owl Carousel 2</a></li>
<li>add JS vendor Owl.Carousel and SASS Files (use bower or zip-download)</li>
<li>update <code>Gruntfile.js</code> to <code>uglify</code> JS</li>
<li>see JS glitch, before JS has fully loaded

<ul>
<li>create <code>custom-owl-carousel.scss</code></li>
</ul></li>
</ul>

<p>Take home Message:</p>

<p><strong>Style as if there was no JS (yet fully loaded)!</strong></p>

<figure>
<img src="talk/grunt-uglify-1.png" alt="Gruntfile.js" />
<figcaption><code>Gruntfile.js</code></figcaption>
</figure>

<figure>
<img src="talk/grunt-uglify-2.png" alt="Gruntfile.js" />
<figcaption><code>Gruntfile.js</code></figcaption>
</figure>

<figure>
<img src="talk/owl-carousel-init.png" alt="js-src/_owl-carousel-init.js" />
<figcaption><code>js-src/_owl-carousel-init.js</code></figcaption>
</figure>

<figure>
<img src="talk/owl-carousel-content-jump.png" alt="sass/custom/_custom-owl-carousel.scss" />
<figcaption><code>sass/custom/_custom-owl-carousel.scss</code></figcaption>
</figure>

<h2 id="extraone:articledetailpagestyling">Extra One: Article detail Page Styling</h2>

<ul>
<li><p>https://www.drupal.org/node/2228783</p></li>
<li><p>add <code>p.teaser</code> and <code>a.button</code> styles</p></li>
<li><p>but hard to set for content manager (even with editor styles)</p></li>
<li><p>so add to <code>thematic.info.yml</code></p>

<pre><code>ckeditor_stylesheets:
  - css/ckeditor-iframe.css
</code></pre></li>
</ul>

<h2 id="extratwo:articlebackbutton">Extra Two: Article Back button</h2>

<ul>
<li>how to come back to views overview page (currently homepage)?</li>
<li>use <code>{{ path('view.searchresults.page_1') }}</code> (relative path) in anchor</li>
<li>add <code>node--article.html.twig</code> and add anchor on bottom</li>
</ul>

<h3 id="twigroutes">TWIG Routes</h3>

<ul>
<li>get <a href="https://github.com/hechoendrupal/DrupalConsole">Drupal Console</a></li>
<li><code>$ drupal router:debug</code> to find paths</li>
<li><code>{{ path('view.searchresults.page_1') }}</code> // relative path</li>
<li><code>{{ path('entity.node.canonical', {'node': node.id}) }}</code> // with params</li>
<li><code>{{ url('view.searchresults.page_1') }}</code> // absolute path</li>
<li>https://chromatichq.com/blog/creating-links-within-twig-templates-using-path-and-url</li>
</ul>

<h2 id="extrathree:seomalusbyheaderlinks">Extra Three: SEO malus by header links</h2>

<ul>
<li>SEO problem until www.drupal.org/node/2406533</li>
<li>plus a lot of permission denied (image) in the logs</li>
<li>interim help: https://github.com/enjoyiacm/unset_html_head_link</li>
</ul>

</body>
</html>